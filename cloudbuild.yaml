steps:
  # Install dependencies
  - name: 'gcr.io/cloud-builders/npm'
    args: ['install']
    dir: 'om-buffer-expert'

  # Build the Angular project
  - name: 'gcr.io/cloud-builders/npm'
    args: ['run', 'build', '--', '--configuration=production']
    dir: 'om-buffer-expert'

  # Deploy to Firebase
  - name: 'gcr.io/cloud-builders/npm'
    args: ['install', '-g', 'firebase-tools']

  - name: 'node:latest'
    entrypoint: 'sh'
    args:
      - '-c'
      - |
        npm install -g firebase-tools &&
        firebase deploy --token '1//01uI_DrICCSmdCgYIARAAGAESNwF-L9IrqYyR7PynynVERvNwBiqVqpC4u149nP86jIZDjMVu7V-cDZXSQvOphjMUGTIAvFbG4Rw' --project buffer-designer
    dir: om-buffer-expert